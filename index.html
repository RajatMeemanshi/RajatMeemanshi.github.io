<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://hv-camera-web-sg.s3-ap-southeast-1.amazonaws.com/hyperverge-web-sdk@4.1.7/src/sdk.min.js"></script>
  </head>
  <body>
    <center><h2>Hyperverge WebSDK Demo</h2></center>
    <div class="container">
      <div class="form-group">
        <center><button type="button" onclick="starOnboarding();" class="btn btn-primary">Run HyperKyc</button>
        <button type="button" onclick="runOCR();" class="btn btn-primary">Run OCR</button></center>
      </div>
      <div id="div1"></div>
    </div>
    <script>
    	function starOnboarding() {
        const accessToken = "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6InNjdWx2eSIsImhhc2giOiIwOTVmNDU4Y2NiM2EwZTFhNzFjYWQyMjM1ZTRkYTRlY2M3MWZlMmM2MWNhYWVlZTJlNzg2ZDY3YTEzODg1NTFlIiwiaWF0IjoxNjYzOTM1NTYzLCJleHAiOjE2NjM5NzE1NjMsImp0aSI6IjExYzUwNDE3LWMxYTktNDllMy1hNGIxLWQ1MDZkYjc1NmJhYiJ9.JCjCc2K3cspkow-n4yy3Hc_CkMr57xO3oSpKGgwVPlk53QTky8RTxuT0vSuE2LEf0mOhptDiuZBBqUzcUDD8XN7FkDginEU3-ZM5hI-jgu5uKdKEgenhJ_SCaxqgw7LM8b5JOi-B2jrp_WzON4SbBGxl7e3njIxvAEV0_zpffLw"
        const hyperKycConfig = new HyperKycConfig(
            accessToken,
            "workflow-rajat-test",
            "testing-mezesse"
        );
         const handler = (HyperKycResult) => {
        console.log(HyperKycResult)
        HyperKycResult.Status - for all statuses going forward from 5.2.0
        if (HyperKycResult.Cancelled) {
          // user cancelled
           console.log(HyperKycResult.Cancelled);
        } else if (HyperKycResult.Failure) {
          // failure
            console.log(HyperKycResult.Failure);
        } else if (HyperKycResult.Success) {
          // success
            console.log(HyperKycResult.Success);
        }
    }
       
        window.HyperKYCModule.launch(hyperKycConfig, handler);
  
    }
   
      function runLiveness(){
      //For Face Capture Screen
       var hvConfig = new HVFaceConfig();
        hvConfig.setLivenessMode(hvConfig.LivenessMode.none);
        hvConfig.setShouldShowInstructionPage(true);
        
        
    
    //callback for Selfie     
    callback = (HVError, HVResponse) => {
          if(HVError) {
            var errorCode = HVError.getErrorCode();
            var errorMessage = HVError.getErrorMessage();
            console.log(HVError);
          } 
          else if(HVResponse) {
            var apiResults = HVResponse.getApiResult();
            var apiHeaders = HVResponse.getApiHeaders();
            faceImageBase64 = HVResponse.getImageBase64();
            var attempts = HVResponse.getAttemptsCount();
            console.log(HVResponse);
          }
        console.log("test");
        };
        HVFaceModule.start(hvConfig, callback);// Start the HVFaceModule. Callback is the function that receives the data once the api call finishes.It gets two objects HVError and HVResponse.
        //faceImageBase64String = imageBase64;
       
        HyperSnapSDK.endUserSession();
        
      }
      
     // Function wrapper for documents button
     function runOCR(){ // Hopefully this 1 function should do both front and back for documents
    
        var hvConfig = new HVDocConfig();
        hvConfig.setShouldShowInstructionPage(true);
         
    
     //docImageBase64String = imageBase64;
         
    //Define Callback function for Document OCR
         
    callback = (HVError, HVResponse) => {
          if(HVError) {
            var errorCode = HVError.getErrorCode();
            var errorMessage = HVError.getErrorMessage();
          } 
          else if(HVResponse) {
            var apiResults = HVResponse.getApiResult();
            var apiHeaders = HVResponse.getApiHeaders();
            docImageBase64 = HVResponse.getImageBase64();
            var attempts = HVResponse.getAttemptsCount();
          }
        };
       HVDocsModule.start(hvConfig, callback); // Start the HVDocsModule. Callback is the function that receives the data once the api call finishes.It gets two objects HVError and HVResponse.
   
    }
      
    </script>
  </body>
</html>   
